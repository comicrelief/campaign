<project name="cr" default="build:dev">
  <!-- example: https://github.com/previousnext/agov/blob/8.x-1.x/build.xml -->
  <!-- Properties -->
  <property name="app.dir"            value="${project.basedir}/"/>
  <property name="app.name"           value="CR Campaign"/>
  <property name="app.profile.name"   value="cr"/>
  <property name="app.profile.dir"    value="profiles/${app.profile.name}/"/>
  <property name="app.profile.theme"  value="${app.profile.dir}themes/custom/campaign_base"/>
  <property name="app.content.dir"    value="${app.profile.dir}modules/custom/cr_default_content/content/"/>
  <!-- Development modules. -->
  <property name="app.code"           value="${app.profile.dir}modules/custom"/>
  <property name="app.config_modules" value="cr cr_article cr_content_wall cr_rich_text_paragraph cr_single_message_row_paragraph cr_teaser cr_landing_page cr_search cr_partner"/>
  <property name="app.dev_modules"    value="devel kint"/>
  <!-- Import common command file -->
  <import file="${project.basedir}/${app.profile.dir}common.xml" optional="true" />
  <!-- These allow developers to override config. on a per environment basis -->
  <property file="build.properties"   override="true"/>
  <!-- Front-end -->
  <target name="grunt:build" description="Generate all compiled Sass and JS files.">
    <exec dir="${app.profile.theme}" logoutput="true" passthru="true" checkreturn="true" command="bundle exec grunt build"/>
  </target>
  <target name="grunt:dependencies" description="Install all grunt dependencies.">
    <exec dir="${app.profile.theme}" logoutput="true" passthru="true" checkreturn="true" command="bundle install --jobs 4 --path vendor/bundle"/>
    <exec dir="${app.profile.theme}" logoutput="true" passthru="true" checkreturn="true" command="npm install"/>
  </target>
</project>
