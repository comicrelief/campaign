parameters:
  monolog.channel_handlers:
    default: ['loggly']
  monolog.processors: ['message_placeholder', 'current_user', 'request_uri', 'ip', 'referer', 'env']

services:
  monolog.processor.env:
    class: Drupal\cr_monolog\Service\LogglyService
    calls:
     - ['getEnv']
  cr_monolog.loggly_token:
    class: Drupal\cr_monolog\Service\LogglyService
    calls:
     - ['getToken']
  monolog.handler.loggly:
    class: Drupal\cr_monolog\Handler\LogglyAsyncHandler
    arguments:
      [@cr_monolog.loggly_token, '200', false]
